# Embeddingç»´åº¦è®¾ç½®åŠŸèƒ½

## åŠŸèƒ½æ¦‚è¿°

ALQuery3Dç°åœ¨æ”¯æŒåŠ¨æ€è®¾ç½®embeddingç»´åº¦ï¼Œå…è®¸ç”¨æˆ·åœ¨3ç»´åˆ°2048ç»´ä¹‹é—´è‡ªç”±é€‰æ‹©ï¼Œæ»¡è¶³ä¸åŒçš„ç ”ç©¶å’Œå®éªŒéœ€æ±‚ã€‚

## ä¸»è¦ç‰¹æ€§

### 1. ç»´åº¦èŒƒå›´
- **æœ€å°ç»´åº¦**: 3ç»´
- **æœ€å¤§ç»´åº¦**: 2048ç»´
- **é»˜è®¤ç»´åº¦**: 128ç»´

### 2. æ™ºèƒ½é™ç»´å¤„ç†
- **3ç»´æ•°æ®**: å½“embeddingç»´åº¦è®¾ç½®ä¸º3æ—¶ï¼Œæ‰€æœ‰é™ç»´æ–¹æ³•ï¼ˆPCAã€t-SNEã€UMAPï¼‰éƒ½ä¼šç›´æ¥æ˜¾ç¤ºåŸå§‹3ç»´åæ ‡
- **é«˜ç»´æ•°æ®**: è‡ªåŠ¨åº”ç”¨é€‰æ‹©çš„é™ç»´ç®—æ³•å°†é«˜ç»´æ•°æ®é™è‡³3ç»´è¿›è¡Œå¯è§†åŒ–

### 3. ç•Œé¢é›†æˆ
- åœ¨Webç•Œé¢çš„Configurationéƒ¨åˆ†æ·»åŠ äº†"Embedding Dimension"è®¾ç½®
- æ”¯æŒæ•°å€¼è¾“å…¥æ¡†å’Œæ»‘åŠ¨æ¡åŒå‘åŒæ­¥
- å®æ—¶å‚æ•°éªŒè¯å’Œé”™è¯¯æç¤º

## ä½¿ç”¨æ–¹æ³•

### Webç•Œé¢ä½¿ç”¨

1. **è®¾ç½®ç»´åº¦**:
   - åœ¨å·¦ä¾§æ§åˆ¶é¢æ¿çš„"Configuration"éƒ¨åˆ†æ‰¾åˆ°"Embedding Dimension"
   - é€šè¿‡è¾“å…¥æ¡†ç›´æ¥è¾“å…¥æ•°å€¼ï¼ˆ3-2048ï¼‰
   - æˆ–ä½¿ç”¨æ»‘åŠ¨æ¡è°ƒèŠ‚ç»´åº¦

2. **ç”Ÿæˆæ•°æ®**:
   - è®¾ç½®å¥½ç»´åº¦åï¼Œé…ç½®å…¶ä»–å‚æ•°ï¼ˆç±»åˆ«æ•°é‡ã€å„ç±»å‚æ•°ç­‰ï¼‰
   - ç‚¹å‡»"Generate Embeddings"æŒ‰é’®ç”ŸæˆæŒ‡å®šç»´åº¦çš„embedding

3. **å¯è§†åŒ–**:
   - 3ç»´æ•°æ®ï¼šä»»ä½•é™ç»´æ–¹æ³•éƒ½æ˜¾ç¤ºåŸå§‹åæ ‡
   - é«˜ç»´æ•°æ®ï¼šé€‰æ‹©PCA/t-SNE/UMAPè¿›è¡Œé™ç»´å¯è§†åŒ–

### ç¼–ç¨‹æ¥å£ä½¿ç”¨

```python
from src.data.embedding_generator import EmbeddingGenerator

# æ–¹æ³•1: åˆå§‹åŒ–æ—¶è®¾ç½®ç»´åº¦
generator = EmbeddingGenerator(embedding_dim=512, random_state=42)
embeddings, labels = generator.generate_clustered_embeddings(
    n_samples_per_class=[100, 100, 100]
)

# æ–¹æ³•2: ç”Ÿæˆæ—¶åŠ¨æ€è®¾ç½®ç»´åº¦
generator = EmbeddingGenerator(embedding_dim=128, random_state=42)
embeddings, labels = generator.generate_clustered_embeddings(
    n_samples_per_class=[100, 100, 100],
    embedding_dim=64  # åŠ¨æ€è¦†ç›–ä¸º64ç»´
)

# 3ç»´æ•°æ®ç‰¹æ®Šå¤„ç†
generator_3d = EmbeddingGenerator(embedding_dim=3, random_state=42)
embeddings_3d, labels_3d = generator_3d.generate_clustered_embeddings(
    n_samples_per_class=[50, 50, 50]
)

# é™ç»´ - 3ç»´æ•°æ®ä¼šç›´æ¥è¿”å›åŸå§‹æ•°æ®
reduced = generator_3d.reduce_dimensions(n_components=3, method='pca')
print(generator_3d.dimensionality_reduction_info)
# è¾“å‡º: {'method': 'original', 'n_components': 3, 'note': 'åŸå§‹æ•°æ®å·²ä¸º3ç»´ï¼Œæ— éœ€é™ç»´'}
```

## æŠ€æœ¯å®ç°

### 1. åç«¯å®ç°
- `EmbeddingGenerator`ç±»æ”¯æŒ`embedding_dim`å‚æ•°
- `generate_clustered_embeddings`æ–¹æ³•æ”¯æŒåŠ¨æ€ç»´åº¦è®¾ç½®
- `reduce_dimensions`æ–¹æ³•æ™ºèƒ½æ£€æµ‹3ç»´æƒ…å†µ

### 2. å‰ç«¯å®ç°
- HTMLç•Œé¢æ·»åŠ ç»´åº¦è®¾ç½®æ§ä»¶
- JavaScriptå¤„ç†ç»´åº¦å‚æ•°ä¼ é€’
- é™ç»´æ–¹æ³•é€‰æ‹©æ—¶çš„3ç»´ç‰¹æ®Šæç¤º

### 3. å‚æ•°éªŒè¯
- ç»´åº¦èŒƒå›´éªŒè¯ï¼ˆ3-2048ï¼‰
- è¾“å…¥ç±»å‹éªŒè¯
- è¾¹ç•Œæƒ…å†µå¤„ç†

## åº”ç”¨åœºæ™¯

### 1. ä½ç»´å¯è§†åŒ–ç ”ç©¶
- è®¾ç½®ä¸º3ç»´ç›´æ¥è§‚å¯ŸåŸå§‹æ•°æ®åˆ†å¸ƒ
- æ— éœ€é™ç»´ï¼Œé¿å…ä¿¡æ¯æŸå¤±
- é€‚åˆç®€å•èšç±»åˆ†æ

### 2. é«˜ç»´ç‰¹å¾å­¦ä¹ 
- è®¾ç½®ä¸º128ã€256ã€512ç­‰å¸¸è§ç»´åº¦
- æ¨¡æ‹ŸçœŸå®æ·±åº¦å­¦ä¹ æ¨¡å‹è¾“å‡º
- ç ”ç©¶é«˜ç»´ç©ºé—´ä¸­çš„æ•°æ®åˆ†å¸ƒ

### 3. æé«˜ç»´å®éªŒ
- è®¾ç½®ä¸º1024ã€2048ç­‰æé«˜ç»´åº¦
- ç ”ç©¶ç»´åº¦è¯…å’’ç°è±¡
- æµ‹è¯•é™ç»´ç®—æ³•æ€§èƒ½

## æ€§èƒ½è€ƒè™‘

### 1. å†…å­˜ä½¿ç”¨
- ç»´åº¦è¶Šé«˜ï¼Œå†…å­˜å ç”¨è¶Šå¤§
- 2048ç»´ Ã— 5000æ ·æœ¬ â‰ˆ 80MBå†…å­˜
- å»ºè®®é«˜ç»´åº¦æ—¶å‡å°‘æ ·æœ¬æ•°é‡

### 2. è®¡ç®—æ—¶é—´
- é«˜ç»´åº¦ç”Ÿæˆæ—¶é—´è¾ƒé•¿
- é™ç»´è®¡ç®—å¤æ‚åº¦éšç»´åº¦å¢åŠ 
- HDF5ç¼“å­˜ç³»ç»Ÿå‡å°‘é‡å¤è®¡ç®—

### 3. å¯è§†åŒ–æ•ˆæœ
- 3ç»´æ•°æ®ï¼šå®Œç¾ä¿æŒåŸå§‹ç»“æ„
- é«˜ç»´æ•°æ®ï¼šé™ç»´å¯èƒ½æŸå¤±éƒ¨åˆ†ä¿¡æ¯
- ä¸åŒé™ç»´æ–¹æ³•æ•ˆæœå·®å¼‚æ˜æ˜¾

## æµ‹è¯•éªŒè¯

é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼š

```bash
# è¿è¡Œç»´åº¦åŠŸèƒ½æµ‹è¯•
python test_embedding_dim.py

# è¿è¡Œè¾¹ç•Œæƒ…å†µæµ‹è¯•  
python test_edge_cases.py
```

æµ‹è¯•è¦†ç›–ï¼š
- âœ… ä¸åŒç»´åº¦ç”Ÿæˆï¼ˆ3, 16, 128, 512, 1024ç»´ï¼‰
- âœ… åŠ¨æ€ç»´åº¦è®¾ç½®
- âœ… 3ç»´æ•°æ®é™ç»´å¤„ç†
- âœ… è¾¹ç•Œå€¼éªŒè¯ï¼ˆæœ€å°3ç»´ï¼Œæœ€å¤§2048ç»´ï¼‰
- âœ… æ— æ•ˆè¾“å…¥å¼‚å¸¸å¤„ç†

## æ›´æ–°æ—¥å¿—

### v1.4.0 - Embeddingç»´åº¦è®¾ç½®åŠŸèƒ½
- âœ¨ æ–°å¢ï¼šæ”¯æŒ3-2048ç»´embeddingç”Ÿæˆ
- âœ¨ æ–°å¢ï¼š3ç»´æ•°æ®æ™ºèƒ½é™ç»´å¤„ç†
- âœ¨ æ–°å¢ï¼šWebç•Œé¢ç»´åº¦è®¾ç½®æ§ä»¶
- âœ¨ æ–°å¢ï¼šåŠ¨æ€ç»´åº¦å‚æ•°è¦†ç›–
- ğŸ› ä¿®å¤ï¼šé™ç»´æ–¹æ³•å¯¹3ç»´æ•°æ®çš„å¤„ç†
- ğŸ“ æ–‡æ¡£ï¼šå®Œæ•´çš„åŠŸèƒ½è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹

---

è¿™ä¸ªåŠŸèƒ½è®©ALQuery3Dæ›´åŠ çµæ´»ï¼Œèƒ½å¤Ÿé€‚åº”ä»ç®€å•3ç»´å¯è§†åŒ–åˆ°å¤æ‚é«˜ç»´ç‰¹å¾å­¦ä¹ çš„å„ç§ç ”ç©¶éœ€æ±‚ã€‚ 